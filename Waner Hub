-- WENER HUB v4.0 | ULTIMATE COMPLETE EDITION WITH WENE-YOU KEY & ALL FEATURES
print("=== WENER HUB v4.0 ULTIMATE COMPLETE WITH FIXED ESP & WENE-YOU KEY ===")
print("üöÄ Loading the most advanced Doors script with all premium features...")

-- ============================================================================
-- SERVICES & INITIALIZATION
-- ============================================================================

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Lighting = game:GetService("Lighting")
local UserInputService = game:GetService("UserInputService")
local TeleportService = game:GetService("TeleportService")
local player = Players.LocalPlayer

-- Wait for character
repeat wait() until player.Character
repeat wait() until player.Character:FindFirstChild("HumanoidRootPart")

-- ============================================================================
-- VARIABLES UNTUK SEMUA FITUR
-- ============================================================================

local espObjects = {}
local currentSpeed = 16
local godModeEnabled = false
local noclipEnabled = false
local doorEspEnabled = false
local keyEspEnabled = false
local entityEspEnabled = false
local playerEspEnabled = false
local itemEspEnabled = false
local bookEspEnabled = false
local autoCollectEnabled = false
local autoUnlockEnabled = false
local autoProximityPromptEnabled = false
local infVitaminsEnabled = false
local rushNotifEnabled = false
local allEntityNotifications = false
local bypassAntiCheat = false

local noclipConnection
local autoCollectConnection
local autoUnlockConnection
local autoProximityPromptConnection
local infVitaminsConnection
local entityConnections = {}
local godModeConnections = {}
local bypassConnections = {}

-- ============================================================================
-- AUTO EXECUTE & AUTO RECONNECT SETUP
-- ============================================================================

local function setupAutoExecute()
    local autoExecuteCode = [[
-- WENER HUB ULTIMATE AUTO EXECUTE
print("üöÄ WENER HUB Auto Execute Triggered!")
loadstring(game:HttpGet("https://raw.githubusercontent.com/WanerScripts/WenerHub/main/doors-ultimate.lua"))()
]]
    
    if not isfolder("WenerHub") then
        makefolder("WenerHub")
    end
    
    writefile("WenerHub/AutoExecute.lua", autoExecuteCode)
    print("üöÄ Auto Execute: CONFIGURED")
end

local function setupAutoReconnect()
    local disconnectDetected = false
    
    local function createDisconnectGUI()
        local ScreenGui = Instance.new("ScreenGui")
        ScreenGui.Name = "WenerDisconnectGUI"
        ScreenGui.ResetOnSpawn = false
        ScreenGui.Parent = game.CoreGui
        
        local Blur = Instance.new("BlurEffect")
        Blur.Size = 30
        Blur.Parent = Lighting
        
        local Background = Instance.new("Frame")
        Background.Size = UDim2.new(1, 0, 1, 0)
        Background.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        Background.BackgroundTransparency = 0.4
        Background.Parent = ScreenGui
        
        local DisconnectPanel = Instance.new("Frame")
        DisconnectPanel.Size = UDim2.new(0, 500, 0, 300)
        DisconnectPanel.Position = UDim2.new(0.5, -250, 0.5, -150)
        DisconnectPanel.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
        DisconnectPanel.Parent = ScreenGui
        
        local Corner = Instance.new("UICorner")
        Corner.CornerRadius = UDim.new(0, 20)
        Corner.Parent = DisconnectPanel
        
        local Title = Instance.new("TextLabel")
        Title.Size = UDim2.new(1, 0, 0, 60)
        Title.BackgroundTransparency = 1
        Title.Text = "‚ö†Ô∏è CONNECTION LOST"
        Title.TextColor3 = Color3.fromRGB(255, 255, 255)
        Title.Font = Enum.Font.GothamBold
        Title.TextSize = 32
        Title.Parent = DisconnectPanel
        
        local Message = Instance.new("TextLabel")
        Message.Size = UDim2.new(1, -40, 0, 100)
        Message.Position = UDim2.new(0, 20, 0, 80)
        Message.BackgroundTransparency = 1
        Message.Text = "üîå Disconnected from server\nüì° Auto Reconnect in 5 seconds..."
        Message.TextColor3 = Color3.fromRGB(200, 200, 200)
        Message.Font = Enum.Font.Gotham
        Message.TextSize = 18
        Message.TextWrapped = true
        Message.Parent = DisconnectPanel
        
        local ReconnectBtn = Instance.new("TextButton")
        ReconnectBtn.Size = UDim2.new(0, 200, 0, 50)
        ReconnectBtn.Position = UDim2.new(0.5, -100, 0, 200)
        ReconnectBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
        ReconnectBtn.Text = "üîÑ Reconnect Now"
        ReconnectBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
        ReconnectBtn.Font = Enum.Font.GothamBold
        ReconnectBtn.TextSize = 18
        ReconnectBtn.Parent = DisconnectPanel
        
        local BtnCorner = Instance.new("UICorner")
        BtnCorner.CornerRadius = UDim.new(0, 10)
        BtnCorner.Parent = ReconnectBtn
        
        local countdown = 5
        task.spawn(function()
            while countdown > 0 do
                Message.Text = string.format("üîå Disconnected from server\nüì° Auto Reconnect in %d seconds...", countdown)
                countdown = countdown - 1
                wait(1)
            end
            TeleportService:Teleport(game.PlaceId, player)
        end)
        
        ReconnectBtn.MouseButton1Click:Connect(function()
            TeleportService:Teleport(game.PlaceId, player)
        end)
    end
    
    local lastHeartbeat = tick()
    RunService.Heartbeat:Connect(function()
        lastHeartbeat = tick()
    end)
    
    task.spawn(function()
        while true do
            wait(1)
            if tick() - lastHeartbeat > 8 and not disconnectDetected then
                disconnectDetected = true
                createDisconnectGUI()
                break
            end
        end
    end)
end

setupAutoExecute()
setupAutoReconnect()

-- ============================================================================
-- LOADING SCREEN
-- ============================================================================

local function createLoadingScreen()
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "WanerLoading"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.Parent = game.CoreGui
    
    local Blur = Instance.new("BlurEffect")
    Blur.Size = 0
    Blur.Parent = Lighting
    
    local Background = Instance.new("Frame")
    Background.Size = UDim2.new(1, 0, 1, 0)
    Background.BackgroundColor3 = Color3.fromRGB(5, 5, 10)
    Background.BackgroundTransparency = 1
    Background.Parent = ScreenGui
    
    local Container = Instance.new("Frame")
    Container.Size = UDim2.new(0, 600, 0, 350)
    Container.Position = UDim2.new(0.5, -300, 0.5, -175)
    Container.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
    Container.BackgroundTransparency = 1
    Container.Parent = ScreenGui
    
    local Corner = Instance.new("UICorner")
    Corner.CornerRadius = UDim.new(0, 25)
    Corner.Parent = Container
    
    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(1, 0, 0, 80)
    Title.Position = UDim2.new(0, 0, 0, 40)
    Title.BackgroundTransparency = 1
    Title.Text = "WENER HUB v4.0"
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.Font = Enum.Font.GothamBold
    Title.TextSize = 54
    Title.TextTransparency = 1
    Title.Parent = Container
    
    local Subtitle = Instance.new("TextLabel")
    Subtitle.Size = UDim2.new(1, 0, 0, 40)
    Subtitle.Position = UDim2.new(0, 0, 0, 120)
    Subtitle.BackgroundTransparency = 1
    Subtitle.Text = "ULTIMATE COMPLETE EDITION"
    Subtitle.TextColor3 = Color3.fromRGB(200, 200, 200)
    Subtitle.Font = Enum.Font.Gotham
    Subtitle.TextSize = 24
    Subtitle.TextTransparency = 1
    Subtitle.Parent = Container
    
    local Status = Instance.new("TextLabel")
    Status.Size = UDim2.new(1, 0, 0, 40)
    Status.Position = UDim2.new(0, 0, 0, 180)
    Status.BackgroundTransparency = 1
    Status.Text = "Initializing Wene-you key system..."
    Status.TextColor3 = Color3.fromRGB(100, 255, 100)
    Status.Font = Enum.Font.Gotham
    Status.TextSize = 18
    Status.TextTransparency = 1
    Status.Parent = Container
    
    local Progress = Instance.new("Frame")
    Progress.Size = UDim2.new(0, 0, 0, 8)
    Progress.Position = UDim2.new(0.075, 0, 0, 240)
    Progress.BackgroundColor3 = Color3.fromRGB(139, 0, 255)
    Progress.BorderSizePixel = 0
    Progress.BackgroundTransparency = 1
    Progress.Parent = Container
    
    local ProgressCorner = Instance.new("UICorner")
    ProgressCorner.CornerRadius = UDim.new(1, 0)
    ProgressCorner.Parent = Progress
    
    task.spawn(function()
        TweenService:Create(Blur, TweenInfo.new(1), {Size = 35}):Play()
        TweenService:Create(Background, TweenInfo.new(1), {BackgroundTransparency = 0.2}):Play()
        TweenService:Create(Container, TweenInfo.new(1), {BackgroundTransparency = 0.1}):Play()
        wait(1)
        
        TweenService:Create(Title, TweenInfo.new(0.8), {TextTransparency = 0}):Play()
        wait(0.4)
        TweenService:Create(Subtitle, TweenInfo.new(0.8), {TextTransparency = 0}):Play()
        wait(0.4)
        TweenService:Create(Status, TweenInfo.new(0.8), {TextTransparency = 0}):Play()
        TweenService:Create(Progress, TweenInfo.new(0.8), {BackgroundTransparency = 0}):Play()
        wait(0.8)
        
        local stages = {
            {text = "üöÄ Setting up Auto Execute...", progress = 0.15},
            {text = "üîÑ Configuring Auto Reconnect...", progress = 0.3},
            {text = "üîë Loading Wene-you Key System...", progress = 0.45},
            {text = "üëÅÔ∏è Loading Modern ESP Systems...", progress = 0.6},
            {text = "ü§ñ Setting up Auto Features...", progress = 0.75},
            {text = "üõ°Ô∏è Initializing Protection...", progress = 0.9},
            {text = "‚úÖ All Systems Ready!", progress = 1.0}
        }
        
        for _, stage in ipairs(stages) do
            Status.Text = stage.text
            TweenService:Create(Progress, TweenInfo.new(1), {Size = UDim2.new(0.85 * stage.progress, 0, 0, 8)}):Play()
            wait(1)
        end
        
        wait(1)
        
        TweenService:Create(Title, TweenInfo.new(0.8), {TextTransparency = 1}):Play()
        TweenService:Create(Subtitle, TweenInfo.new(0.8), {TextTransparency = 1}):Play()
        TweenService:Create(Status, TweenInfo.new(0.8), {TextTransparency = 1}):Play()
        TweenService:Create(Progress, TweenInfo.new(0.8), {BackgroundTransparency = 1}):Play()
        TweenService:Create(Container, TweenInfo.new(0.8), {BackgroundTransparency = 1}):Play()
        TweenService:Create(Background, TweenInfo.new(0.8), {BackgroundTransparency = 1}):Play()
        TweenService:Create(Blur, TweenInfo.new(1), {Size = 0}):Play()
        wait(1.2)
        
        Blur:Destroy()
        ScreenGui:Destroy()
    end)
end

createLoadingScreen()
wait(6)

-- ============================================================================
-- KEY SYSTEM DENGAN EXPIRE 24 JAM - WENE-YOU
-- ============================================================================

local KeySystemEnabled = true
local CorrectKey = "Wene-you"
local KeyExpireTime = 86400 -- 24 jam dalam detik

local function formatTime(seconds)
    local hours = math.floor(seconds / 3600)
    local minutes = math.floor((seconds % 3600) / 60)
    local secs = seconds % 60
    return string.format("%02d:%02d:%02d", hours, minutes, secs)
end

local function checkKey()
    if not isfolder("WenerHub") then
        makefolder("WenerHub")
        return false
    end
    
    if not isfile("WenerHub/Key.json") then
        return false
    end
    
    local success, data = pcall(function()
        return game:GetService("HttpService"):JSONDecode(readfile("WenerHub/Key.json"))
    end)
    
    if not success or not data then return false end
    
    local currentTime = os.time()
    if data.key == CorrectKey and data.expire_time and currentTime < data.expire_time then
        return true, data.expire_time - currentTime
    end
    
    return false
end

local function saveKey()
    local currentTime = os.time()
    local expireTime = currentTime + KeyExpireTime
    
    local keyData = {
        key = CorrectKey,
        save_time = currentTime,
        expire_time = expireTime,
        user = player.Name,
        version = "v4.0_Ultimate_Complete",
        expires_in_24_hours = true
    }
    
    writefile("WenerHub/Key.json", game:GetService("HttpService"):JSONEncode(keyData))
end

local ownerUsername = "winnertupiq52"
local isOwner = player.Name == ownerUsername

if KeySystemEnabled and not isOwner then
    local keyValid, timeLeft = checkKey()
    
    if not keyValid then
        local ScreenGui = Instance.new("ScreenGui")
        ScreenGui.Name = "WanerKeySystem"
        ScreenGui.ResetOnSpawn = false
        ScreenGui.Parent = game.CoreGui
        
        local Blur = Instance.new("BlurEffect")
        Blur.Size = 0
        Blur.Parent = Lighting
        
        local Background = Instance.new("Frame")
        Background.Size = UDim2.new(1, 0, 1, 0)
        Background.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        Background.BackgroundTransparency = 1
        Background.Parent = ScreenGui
        
        local MainFrame = Instance.new("Frame")
        MainFrame.Size = UDim2.new(0, 550, 0, 450)
        MainFrame.Position = UDim2.new(0.5, -275, 0.5, -225)
        MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
        MainFrame.BackgroundTransparency = 1
        MainFrame.Parent = ScreenGui
        
        local Corner = Instance.new("UICorner")
        Corner.CornerRadius = UDim.new(0, 25)
        Corner.Parent = MainFrame
        
        TweenService:Create(Blur, TweenInfo.new(0.8), {Size = 30}):Play()
        TweenService:Create(Background, TweenInfo.new(0.8), {BackgroundTransparency = 0.3}):Play()
        TweenService:Create(MainFrame, TweenInfo.new(0.8), {BackgroundTransparency = 0.1}):Play()
        wait(0.8)
        
        local Title = Instance.new("TextLabel")
        Title.Size = UDim2.new(1, 0, 0, 80)
        Title.BackgroundTransparency = 1
        Title.Text = "üîê WENER HUB PREMIUM ACCESS"
        Title.TextColor3 = Color3.fromRGB(255, 255, 255)
        Title.Font = Enum.Font.GothamBold
        Title.TextSize = 28
        Title.Parent = MainFrame
        
        local KeyDisplay = Instance.new("TextLabel")
        KeyDisplay.Size = UDim2.new(1, -40, 0, 50)
        KeyDisplay.Position = UDim2.new(0, 20, 0, 80)
        KeyDisplay.BackgroundTransparency = 1
        KeyDisplay.Text = "‚ú® Super Premium Key: Wene-you"
        KeyDisplay.TextColor3 = Color3.fromRGB(255, 215, 0)
        KeyDisplay.Font = Enum.Font.GothamBold
        KeyDisplay.TextSize = 22
        KeyDisplay.Parent = MainFrame
        
        local ExpireInfo = Instance.new("TextLabel")
        ExpireInfo.Size = UDim2.new(1, -40, 0, 40)
        ExpireInfo.Position = UDim2.new(0, 20, 0, 130)
        ExpireInfo.BackgroundTransparency = 1
        ExpireInfo.Text = "‚è∞ Key valid for 24 Hours (86400 seconds)\nüíé Auto-save & Premium features included"
        ExpireInfo.TextColor3 = Color3.fromRGB(0, 255, 0)
        ExpireInfo.Font = Enum.Font.Gotham
        ExpireInfo.TextSize = 16
        ExpireInfo.TextWrapped = true
        ExpireInfo.Parent = MainFrame
        
        local KeyInput = Instance.new("TextBox")
        KeyInput.Size = UDim2.new(1, -40, 0, 55)
        KeyInput.Position = UDim2.new(0, 20, 0, 190)
        KeyInput.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
        KeyInput.PlaceholderText = "Enter Super Premium Key: Wene-you"
        KeyInput.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
        KeyInput.Text = ""
        KeyInput.TextColor3 = Color3.fromRGB(255, 255, 255)
        KeyInput.Font = Enum.Font.Gotham
        KeyInput.TextSize = 20
        KeyInput.Parent = MainFrame
        
        local InputCorner = Instance.new("UICorner")
        InputCorner.CornerRadius = UDim.new(0, 15)
        InputCorner.Parent = KeyInput
        
        local SubmitBtn = Instance.new("TextButton")
        SubmitBtn.Size = UDim2.new(1, -40, 0, 55)
        SubmitBtn.Position = UDim2.new(0, 20, 0, 270)
        SubmitBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
        SubmitBtn.Text = "‚úì ACTIVATE PREMIUM KEY"
        SubmitBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
        SubmitBtn.Font = Enum.Font.GothamBold
        SubmitBtn.TextSize = 20
        SubmitBtn.Parent = MainFrame
        
        local BtnCorner = Instance.new("UICorner")
        BtnCorner.CornerRadius = UDim.new(0, 15)
        BtnCorner.Parent = SubmitBtn
        
        local Info = Instance.new("TextLabel")
        Info.Size = UDim2.new(1, -40, 0, 80)
        Info.Position = UDim2.new(0, 20, 0, 350)
        Info.BackgroundTransparency = 1
        Info.Text = "üåü Premium Features Include:\n‚Ä¢ Modern ESP (Not Old Printer Style) ‚Ä¢ Auto ProximityPrompt R\n‚Ä¢ Auto Collect from Drawers ‚Ä¢ All Advanced Functions\n‚Ä¢ Fixed Everything ‚Ä¢ 24-Hour Premium Access"
        Info.TextColor3 = Color3.fromRGB(200, 200, 200)
        Info.Font = Enum.Font.Gotham
        Info.TextSize = 14
        Info.TextWrapped = true
        Info.Parent = MainFrame
        
        local submitted = false
        SubmitBtn.MouseButton1Click:Connect(function()
            if KeyInput.Text == CorrectKey then
                saveKey()
                submitted = true
                
                SubmitBtn.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
                SubmitBtn.Text = "‚úÖ SUCCESS! Key valid for 24 hours"
                
                wait(1)
                
                TweenService:Create(MainFrame, TweenInfo.new(0.8), {BackgroundTransparency = 1}):Play()
                TweenService:Create(Title, TweenInfo.new(0.8), {TextTransparency = 1}):Play()
                TweenService:Create(KeyDisplay, TweenInfo.new(0.8), {TextTransparency = 1}):Play()
                TweenService:Create(ExpireInfo, TweenInfo.new(0.8), {TextTransparency = 1}):Play()
                TweenService:Create(KeyInput, TweenInfo.new(0.8), {BackgroundTransparency = 1, TextTransparency = 1}):Play()
                TweenService:Create(SubmitBtn, TweenInfo.new(0.8), {BackgroundTransparency = 1, TextTransparency = 1}):Play()
                TweenService:Create(Info, TweenInfo.new(0.8), {TextTransparency = 1}):Play()
                TweenService:Create(Background, TweenInfo.new(0.8), {BackgroundTransparency = 1}):Play()
                TweenService:Create(Blur, TweenInfo.new(1), {Size = 0}):Play()
                wait(1.2)
                
                Blur:Destroy()
                ScreenGui:Destroy()
            else
                SubmitBtn.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                SubmitBtn.Text = "‚ùå INVALID! Correct key: Wene-you"
                wait(1.5)
                SubmitBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
                SubmitBtn.Text = "‚úì ACTIVATE PREMIUM KEY"
            end
        end)
        
        repeat wait(0.1) until submitted
    end
end

-- ============================================================================
-- WELCOME SCREEN
-- ============================================================================

local function createWelcomeScreen()
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "WenerWelcome"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.Parent = game.CoreGui
    
    local Blur = Instance.new("BlurEffect")
    Blur.Size = 0
    Blur.Parent = Lighting
    
    local Background = Instance.new("Frame")
    Background.Size = UDim2.new(1, 0, 1, 0)
    Background.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Background.BackgroundTransparency = 1
    Background.Parent = ScreenGui
    
    local WelcomeText = Instance.new("TextLabel")
    WelcomeText.Size = UDim2.new(0.8, 0, 0.2, 0)
    WelcomeText.Position = UDim2.new(0.1, 0, 0.3, 0)
    WelcomeText.BackgroundTransparency = 1
    WelcomeText.Text = "Welcome " .. player.DisplayName .. " To WENER Hub"
    WelcomeText.TextColor3 = Color3.fromRGB(139, 0, 255)
    WelcomeText.Font = Enum.Font.GothamBold
    WelcomeText.TextSize = 48
    WelcomeText.TextStrokeTransparency = 0
    WelcomeText.TextTransparency = 1
    WelcomeText.Parent = ScreenGui
    
    local HubText = Instance.new("TextLabel")
    HubText.Size = UDim2.new(1, 0, 0.3, 0)
    HubText.Position = UDim2.new(0, 0, 0.55, 0)
    HubText.BackgroundTransparency = 1
    HubText.Text = "W3n3r HuB"
    HubText.TextColor3 = Color3.fromRGB(255, 255, 255)
    HubText.Font = Enum.Font.GothamBold
    HubText.TextSize = 72
    HubText.TextStrokeTransparency = 0
    HubText.TextTransparency = 1
    HubText.Parent = ScreenGui
    
    task.spawn(function()
        TweenService:Create(Blur, TweenInfo.new(1), {Size = 25}):Play()
        TweenService:Create(Background, TweenInfo.new(1), {BackgroundTransparency = 0.3}):Play()
        wait(1)
        
        TweenService:Create(WelcomeText, TweenInfo.new(1.5), {TextTransparency = 0}):Play()
        wait(2)
        
        TweenService:Create(HubText, TweenInfo.new(0.5), {TextTransparency = 0}):Play()
        wait(0.5)
        
        local glitchTexts = {
            "W3n3r HuB", "W‚Ç¨n‚Ç¨r H‚à™B", "W¬£n¬£r HŒºB", "W‚ààn‚ààr H‚à™√ü",
            "W‚àÇn‚àÇr Hub", "Wen‚Ç¨r Hub", "Wen3r Hub", "Wener Hub"
        }
        
        for i = 1, 15 do
            HubText.Text = glitchTexts[math.random(1, #glitchTexts)]
            HubText.TextColor3 = Color3.fromRGB(
                math.random(100, 255),
                math.random(100, 255), 
                math.random(100, 255)
            )
            HubText.Position = UDim2.new(
                math.random(-5, 5) / 100,
                0,
                0.55 + math.random(-2, 2) / 100,
                0
            )
            wait(0.1)
        end
        
        TweenService:Create(HubText, TweenInfo.new(1), {
            TextColor3 = Color3.fromRGB(139, 0, 255),
            Position = UDim2.new(0, 0, 0.55, 0)
        }):Play()
        HubText.Text = "Wener Hub"
        
        wait(3)
        
        TweenService:Create(WelcomeText, TweenInfo.new(1.5), {TextTransparency = 1}):Play()
        TweenService:Create(HubText, TweenInfo.new(1.5), {TextTransparency = 1}):Play()
        TweenService:Create(Background, TweenInfo.new(1.5), {BackgroundTransparency = 1}):Play()
        TweenService:Create(Blur, TweenInfo.new(1.5), {Size = 0}):Play()
        
        wait(1.5)
        ScreenGui:Destroy()
        Blur:Destroy()
    end)
end

createWelcomeScreen()

-- ============================================================================
-- PERMANENT LOGO
-- ============================================================================

local function createPermanentLogo()
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "WanerLogo"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.Parent = game.CoreGui
    
    local Container = Instance.new("Frame")
    Container.Size = UDim2.new(0, 500, 0, 90)
    Container.Position = UDim2.new(0.5, -250, 0.02, 0)
    Container.BackgroundTransparency = 1
    Container.Parent = ScreenGui
    
    local WenerText = Instance.new("TextLabel")
    WenerText.Size = UDim2.new(0, 170, 1, 0)
    WenerText.Position = UDim2.new(0, 0, 0, 0)
    WenerText.BackgroundTransparency = 1
    WenerText.Text = "WENER"
    WenerText.TextColor3 = Color3.fromRGB(139, 0, 255)
    WenerText.Font = Enum.Font.GothamBold
    WenerText.TextSize = 44
    WenerText.TextStrokeTransparency = 0.3
    WenerText.TextXAlignment = Enum.TextXAlignment.Right
    WenerText.TextTransparency = 1
    WenerText.Parent = Container
    
    local HubText = Instance.new("TextLabel")
    HubText.Size = UDim2.new(0, 110, 1, 0)
    HubText.Position = UDim2.new(0, 180, 0, 0)
    HubText.BackgroundTransparency = 1
    HubText.Text = "HUB"
    HubText.TextColor3 = Color3.fromRGB(139, 0, 255)
    HubText.Font = Enum.Font.GothamBold
    HubText.TextSize = 44
    HubText.TextStrokeTransparency = 0.3
    HubText.TextXAlignment = Enum.TextXAlignment.Left
    HubText.TextTransparency = 1
    HubText.Parent = Container
    
    local VersionText = Instance.new("TextLabel")
    VersionText.Size = UDim2.new(0, 120, 0, 25)
    VersionText.Position = UDim2.new(0, 300, 1, -25)
    VersionText.BackgroundTransparency = 1
    VersionText.Text = "v4.0 Ultimate Complete"
    VersionText.TextColor3 = Color3.fromRGB(200, 200, 200)
    VersionText.Font = Enum.Font.Gotham
    VersionText.TextSize = 14
    VersionText.TextTransparency = 1
    VersionText.Parent = Container
    
    local KeyText = Instance.new("TextLabel")
    KeyText.Size = UDim2.new(0, 140, 0, 25)
    KeyText.Position = UDim2.new(0, 300, 0, 25)
    KeyText.BackgroundTransparency = 1
    KeyText.Text = "üîë Key: Wene-you"
    KeyText.TextColor3 = Color3.fromRGB(255, 215, 0)
    KeyText.Font = Enum.Font.GothamBold
    KeyText.TextSize = 12
    KeyText.TextTransparency = 1
    KeyText.Parent = Container
    
    if isOwner then
        local OwnerText = Instance.new("TextLabel")
        OwnerText.Size = UDim2.new(0, 120, 0, 25)
        OwnerText.Position = UDim2.new(0, 300, 0, 0)
        OwnerText.BackgroundTransparency = 1
        OwnerText.Text = "üëë OWNER ACCESS"
        OwnerText.TextColor3 = Color3.fromRGB(255, 215, 0)
        OwnerText.Font = Enum.Font.GothamBold
        OwnerText.TextSize = 14
        OwnerText.TextTransparency = 1
        OwnerText.Parent = Container
        
        task.spawn(function()
            wait(14)
            TweenService:Create(OwnerText, TweenInfo.new(1.5), {TextTransparency = 0}):Play()
        end)
    end
    
    task.spawn(function()
        wait(14)
        TweenService:Create(WenerText, TweenInfo.new(1.5), {TextTransparency = 0}):Play()
        wait(0.3)
        TweenService:Create(HubText, TweenInfo.new(1.5), {TextTransparency = 0}):Play()
        wait(0.3)
        TweenService:Create(VersionText, TweenInfo.new(1.2), {TextTransparency = 0}):Play()
        wait(0.2)
        TweenService:Create(KeyText, TweenInfo.new(1.2), {TextTransparency = 0}):Play()
    end)
end

task.spawn(createPermanentLogo)

-- ============================================================================
-- MODERN ESP SYSTEM (BUKAN PRINTER JAMAN DULU)
-- ============================================================================

local function createModernESP(obj, text, color, espType)
    if not obj or obj:FindFirstChild("WenerESP_" .. espType) then return end
    
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        local distance = (player.Character.HumanoidRootPart.Position - obj.Position).Magnitude
        if distance > 500 then return end
    end
    
    -- Modern Highlight dengan smooth glow
    local highlight = Instance.new("Highlight")
    highlight.Name = "WenerESP_" .. espType
    highlight.Adornee = obj.Parent or obj
    highlight.FillColor = color
    highlight.FillTransparency = 0.5
    highlight.OutlineColor = color
    highlight.OutlineTransparency = 0
    highlight.Parent = obj
    
    -- Modern Billboard GUI dengan design premium
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "WenerESP_" .. espType .. "_Modern"
    billboard.Adornee = obj
    billboard.Size = UDim2.new(4, 0, 2, 0)
    billboard.StudsOffset = Vector3.new(0, 3, 0)
    billboard.AlwaysOnTop = true
    billboard.MaxDistance = 500
    billboard.LightInfluence = 0
    billboard.Parent = obj
    
    -- Modern background dengan rounded design
    local bgFrame = Instance.new("Frame")
    bgFrame.Size = UDim2.new(1, 0, 1, 0)
    bgFrame.BackgroundColor3 = Color3.new(0.05, 0.05, 0.15)
    bgFrame.BackgroundTransparency = 0.2
    bgFrame.BorderSizePixel = 0
    bgFrame.Parent = billboard
    
    local bgCorner = Instance.new("UICorner")
    bgCorner.CornerRadius = UDim.new(0, 12)
    bgCorner.Parent = bgFrame
    
    -- Modern gradient untuk premium look
    local gradient = Instance.new("UIGradient")
    gradient.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, color),
        ColorSequenceKeypoint.new(1, Color3.new(color.R * 0.6, color.G * 0.6, color.B * 0.6))
    })
    gradient.Rotation = 45
    gradient.Parent = bgFrame
    
    -- Modern stroke untuk outline premium
    local frameStroke = Instance.new("UIStroke")
    frameStroke.Color = color
    frameStroke.Thickness = 2
    frameStroke.Transparency = 0.3
    frameStroke.Parent = bgFrame
    
    -- Modern text label
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -10, 0.6, 0)
    label.Position = UDim2.new(0, 5, 0, 5)
    label.BackgroundTransparency = 1
    label.Text = text
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.TextStrokeTransparency = 0.2
    label.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    label.TextScaled = true
    label.Font = Enum.Font.GothamBold
    label.Parent = billboard
    
    -- Modern distance display
    local distanceLabel = Instance.new("TextLabel")
    distanceLabel.Size = UDim2.new(1, -10, 0.4, 0)
    distanceLabel.Position = UDim2.new(0, 5, 0.6, 0)
    distanceLabel.BackgroundTransparency = 1
    distanceLabel.Text = "0m"
    distanceLabel.TextColor3 = color
    distanceLabel.TextStrokeTransparency = 0.2
    distanceLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    distanceLabel.TextScaled = true
    distanceLabel.Font = Enum.Font.Gotham
    distanceLabel.Parent = billboard
    
    -- Modern smooth animation
    task.spawn(function()
        while highlight.Parent and obj.Parent do
            TweenService:Create(highlight, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {
                FillTransparency = 0.8,
                OutlineTransparency = 0.1
            }):Play()
            
            TweenService:Create(frameStroke, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {
                Transparency = 0.6
            }):Play()
            
            task.wait(2)
        end
    end)
    
    -- Update distance real-time
    task.spawn(function()
        while billboard.Parent and obj.Parent and player.Character and player.Character:FindFirstChild("HumanoidRootPart") do
            local distance = math.floor((player.Character.HumanoidRootPart.Position - obj.Position).Magnitude)
            distanceLabel.Text = distance .. "m"
            
            if distance > 500 then
                if highlight then highlight:Destroy() end
                if billboard then billboard:Destroy() end
                break
            end
            
            task.wait(0.5)
        end
    end)
    
    table.insert(espObjects, {highlight = highlight, billboard = billboard})
    return {highlight, billboard}
end

-- ============================================================================
-- ESP UPDATE FUNCTIONS - COMPLETE & FIXED
-- ============================================================================

local function updateDoorESP()
    if not doorEspEnabled then return end
    
    local currentRooms = workspace:FindFirstChild("CurrentRooms")
    if not currentRooms then return end
    
    for _, room in pairs(currentRooms:GetChildren()) do
        if room:IsA("Model") and tonumber(room.Name) then
            local door = room:FindFirstChild("Door")
            if door then
                local doorPart = door:FindFirstChildWhichIsA("BasePart")
                if doorPart and not doorPart:FindFirstChild("WenerESP_door") then
                    createModernESP(doorPart, "üö™ Door " .. room.Name, Color3.fromRGB(0, 255, 0), "door")
                end
            end
        end
    end
end

local function updateKeyESP()
    if not keyEspEnabled then return end
    
    -- Modern key detection dengan multiple methods
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("Model") then
            if obj.Name == "KeyObtain" or obj.Name == "Key" or obj.Name:find("Key") then
                local keyPart = obj:FindFirstChild("Handle") or obj:FindFirstChildWhichIsA("BasePart")
                if keyPart and not keyPart:FindFirstChild("WenerESP_key") then
                    createModernESP(keyPart, "üóùÔ∏è Key", Color3.fromRGB(255, 215, 0), "key")
                end
            end
        elseif obj:IsA("BasePart") then
            if obj.Name == "Key" or obj.Name:find("Key") then
                if not obj:FindFirstChild("WenerESP_key") then
                    createModernESP(obj, "üóùÔ∏è Key", Color3.fromRGB(255, 215, 0), "key")
                end
            end
        end
    end
    
    local currentRooms = workspace:FindFirstChild("CurrentRooms")
    if currentRooms then
        for _, room in pairs(currentRooms:GetChildren()) do
            if room:IsA("Model") then
                for _, asset in pairs(room:GetDescendants()) do
                    if asset:IsA("Model") and (asset.Name == "KeyObtain" or asset.Name == "Key") then
                        local keyPart = asset:FindFirstChild("Handle") or asset:FindFirstChildWhichIsA("BasePart")
                        if keyPart and not keyPart:FindFirstChild("WenerESP_key") then
                            createModernESP(keyPart, "üóùÔ∏è Key", Color3.fromRGB(255, 215, 0), "key")
                        end
                    end
                end
            end
        end
    end
end

local function updateItemESP()
    if not itemEspEnabled then return end
    
    local collectableItems = {
        "Vitamins", "Lockpick", "Candle", "Lighter", "FlashlightPickup", "Flashlight",
        "Crucifix", "Bandage", "SkeletonKey", "Shakelight", "Scanner", 
        "Battery", "Herb", "Pill"
    }
    
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("Model") then
            for _, itemName in pairs(collectableItems) do
                if obj.Name == itemName or obj.Name:find(itemName) then
                    local hasPrompt = false
                    local itemPart = obj:FindFirstChildWhichIsA("BasePart")
                    
                    if itemPart then
                        local prompt = itemPart:FindFirstChildOfClass("ProximityPrompt")
                        if prompt then hasPrompt = true end
                        
                        if not hasPrompt then
                            for _, child in pairs(obj:GetDescendants()) do
                                if child:IsA("ProximityPrompt") then
                                    hasPrompt = true
                                    break
                                end
                            end
                        end
                        
                        if hasPrompt and not itemPart:FindFirstChild("WenerESP_item") then
                            local icon = "üì¶"
                            if itemName == "Vitamins" or itemName == "Pill" then icon = "üíä"
                            elseif itemName == "Lockpick" then icon = "üîì"
                            elseif itemName:find("Flashlight") or itemName == "Shakelight" then icon = "üî¶"
                            elseif itemName == "Candle" then icon = "üïØÔ∏è"
                            elseif itemName == "Lighter" then icon = "üî•"
                            elseif itemName == "Crucifix" then icon = "‚úùÔ∏è"
                            elseif itemName == "Bandage" then icon = "ü©π"
                            elseif itemName == "SkeletonKey" then icon = "üóùÔ∏è"
                            elseif itemName == "Battery" then icon = "üîã"
                            end
                            
                            createModernESP(itemPart, icon .. " " .. itemName, Color3.fromRGB(255, 0, 0), "item")
                        end
                    end
                    break
                end
            end
        end
    end
end

local function updateBookESP()
    if not bookEspEnabled then return end
    
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("Model") then
            if obj.Name == "Book" or obj.Name:find("Book") then
                local bookPart = obj:FindFirstChildWhichIsA("BasePart")
                if bookPart then
                    local hasPrompt = bookPart:FindFirstChildOfClass("ProximityPrompt")
                    if hasPrompt and not bookPart:FindFirstChild("WenerESP_book") then
                        createModernESP(bookPart, "üìö Figure Book", Color3.fromRGB(139, 69, 19), "book")
                    end
                end
            end
        elseif obj:IsA("BasePart") then
            if obj.Name == "Book" or obj.Name:find("Book") then
                local hasPrompt = obj:FindFirstChildOfClass("ProximityPrompt")
                if hasPrompt and not obj:FindFirstChild("WenerESP_book") then
                    createModernESP(obj, "üìö Figure Book", Color3.fromRGB(139, 69, 19), "book")
                end
            end
        end
    end
    
    local currentRooms = workspace:FindFirstChild("CurrentRooms")
    if currentRooms then
        local room50 = currentRooms:FindFirstChild("50")
        if room50 then
            for _, asset in pairs(room50:GetDescendants()) do
                if asset:IsA("Model") and (asset.Name == "Book" or asset.Name:find("Book")) then
                    local bookPart = asset:FindFirstChildWhichIsA("BasePart")
                    if bookPart then
                        local hasPrompt = bookPart:FindFirstChildOfClass("ProximityPrompt")
                        if hasPrompt and not bookPart:FindFirstChild("WenerESP_book") then
                            createModernESP(bookPart, "üìö Figure Book", Color3.fromRGB(139, 69, 19), "book")
                        end
                    end
                end
            end
        end
    end
end

local function updateEntityESP()
    if not entityEspEnabled then return end
    
    local entities = {
        {name = "RushMoving", display = "Rush", color = Color3.fromRGB(255, 0, 0)},
        {name = "AmbushMoving", display = "Ambush", color = Color3.fromRGB(255, 100, 0)},
        {name = "Eyes", display = "Eyes", color = Color3.fromRGB(255, 255, 255)},
        {name = "Screech", display = "Screech", color = Color3.fromRGB(0, 255, 0)},
        {name = "Halt", display = "Halt", color = Color3.fromRGB(0, 0, 255)},
        {name = "Seek", display = "Seek", color = Color3.fromRGB(0, 0, 0)},
        {name = "Figure", display = "Figure", color = Color3.fromRGB(139, 0, 255)},
        {name = "Dupe", display = "Dupe", color = Color3.fromRGB(255, 255, 0)},
        {name = "A60", display = "A-60", color = Color3.fromRGB(255, 0, 255)},
        {name = "A120", display = "A-120", color = Color3.fromRGB(0, 255, 255)}
    }
    
    for _, obj in pairs(workspace:GetDescendants()) do        if obj:IsA("Model") then
            for _, entity in pairs(entities) do
                if obj.Name == entity.name or obj.Name:find(entity.name) then
                    local entityPart = obj:FindFirstChildWhichIsA("BasePart") or obj.PrimaryPart
                    if entityPart and not entityPart:FindFirstChild("WenerESP_entity") then
                        createModernESP(entityPart, "‚ö†Ô∏è " .. entity.display, entity.color, "entity")
                    end
                    break
                end
            end
        end
    end
end

local function updatePlayerESP()
    if not playerEspEnabled then return end
    
    for _, otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer ~= player and otherPlayer.Character then
            local hrp = otherPlayer.Character:FindFirstChild("HumanoidRootPart")
            if hrp and not hrp:FindFirstChild("WenerESP_player") then
                createModernESP(hrp, "üë§ " .. otherPlayer.DisplayName, Color3.fromRGB(0, 170, 255), "player")
            end
        end
    end
end

-- ============================================================================
-- AUTO PROXIMITY PROMPT R SYSTEM
-- ============================================================================

local function enableAutoProximityPrompt()
    autoProximityPromptEnabled = true
    
    if autoProximityPromptConnection then autoProximityPromptConnection:Disconnect() end
    
    local function autoActivatePrompts()
        if not autoProximityPromptEnabled or not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end
        
        for _, obj in pairs(workspace:GetDescendants()) do
            if obj:IsA("ProximityPrompt") and obj.Enabled then
                local parent = obj.Parent
                if parent and parent:IsA("BasePart") then
                    local distance = (player.Character.HumanoidRootPart.Position - parent.Position).Magnitude
                    if distance <= obj.MaxActivationDistance then
                        pcall(function()
                            fireproximityprompt(obj)
                        end)
                    end
                end
            end
        end
    end
    
    autoProximityPromptConnection = RunService.Heartbeat:Connect(function()
        autoActivatePrompts()
    end)
    
    print("ü§ñ Auto ProximityPrompt R: ENABLED")
end

local function disableAutoProximityPrompt()
    autoProximityPromptEnabled = false
    
    if autoProximityPromptConnection then 
        autoProximityPromptConnection:Disconnect() 
        autoProximityPromptConnection = nil
    end
    
    print("ü§ñ Auto ProximityPrompt R: DISABLED")
end

-- ============================================================================
-- AUTO COLLECT ITEMS FROM DRAWERS/CABINETS
-- ============================================================================

local function enableAutoCollectDrawers()
    autoCollectEnabled = true
    
    if autoCollectConnection then autoCollectConnection:Disconnect() end
    
    local function collectFromDrawers()
        if not autoCollectEnabled or not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end
        
        -- Cari dan buka laci/cabinet
        for _, obj in pairs(workspace:GetDescendants()) do
            if obj:IsA("Model") then
                local isDrawer = obj.Name:find("Drawer") or obj.Name:find("Cabinet") or 
                                obj.Name:find("Desk") or obj.Name:find("Wardrobe") or
                                obj.Name:find("Closet") or obj.Name:find("Dresser")
                
                if isDrawer then
                    local drawerPart = obj:FindFirstChildWhichIsA("BasePart")
                    if drawerPart then
                        local distance = (player.Character.HumanoidRootPart.Position - drawerPart.Position).Magnitude
                        if distance <= 20 then
                            -- Buka laci dulu
                            local openPrompt = drawerPart:FindFirstChildOfClass("ProximityPrompt")
                            if not openPrompt then
                                for _, child in pairs(obj:GetDescendants()) do
                                    if child:IsA("ProximityPrompt") then
                                        openPrompt = child
                                        break
                                    end
                                end
                            end
                            
                            if openPrompt and openPrompt.Enabled then
                                pcall(function()
                                    fireproximityprompt(openPrompt)
                                end)
                                wait(0.3)
                            end
                            
                            -- Ambil semua item di dalam
                            for _, item in pairs(obj:GetDescendants()) do
                                if item:IsA("Model") then
                                    local itemNames = {
                                        "Vitamins", "Lockpick", "Key", "Flashlight", "Lighter", 
                                        "Candle", "Crucifix", "Bandage", "SkeletonKey", "Battery",
                                        "Shakelight", "Scanner", "Herb", "Pill"
                                    }
                                    
                                    for _, itemName in pairs(itemNames) do
                                        if item.Name == itemName or item.Name:find(itemName) then
                                            local itemPart = item:FindFirstChildWhichIsA("BasePart")
                                            if itemPart then
                                                local itemPrompt = itemPart:FindFirstChildOfClass("ProximityPrompt")
                                                if not itemPrompt then
                                                    for _, child in pairs(item:GetDescendants()) do
                                                        if child:IsA("ProximityPrompt") then
                                                            itemPrompt = child
                                                            break
                                                        end
                                                    end
                                                end
                                                
                                                if itemPrompt and itemPrompt.Enabled then
                                                    pcall(function()
                                                        fireproximityprompt(itemPrompt)
                                                    end)
                                                end
                                            end
                                            break
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
        
        -- Ambil item loose di sekitar
        local collectableItems = {
            "Vitamins", "Lockpick", "Key", "Flashlight", "Lighter", "Candle", 
            "Crucifix", "Bandage", "SkeletonKey", "Battery", "Shakelight", 
            "Scanner", "Herb", "Pill"
        }
        
        for _, obj in pairs(workspace:GetDescendants()) do
            if obj:IsA("Model") then
                for _, itemName in pairs(collectableItems) do
                    if obj.Name == itemName or obj.Name:find(itemName) then
                        local itemPart = obj:FindFirstChildWhichIsA("BasePart")
                        if itemPart then
                            local distance = (player.Character.HumanoidRootPart.Position - itemPart.Position).Magnitude
                            if distance <= 15 then
                                local prompt = itemPart:FindFirstChildOfClass("ProximityPrompt")
                                if not prompt then
                                    for _, child in pairs(obj:GetDescendants()) do
                                        if child:IsA("ProximityPrompt") then
                                            prompt = child
                                            break
                                        end
                                    end
                                end
                                
                                if prompt and prompt.Enabled then
                                    pcall(function()
                                        fireproximityprompt(prompt)
                                    end)
                                end
                            end
                        end
                        break
                    end
                end
            end
        end
    end
    
    autoCollectConnection = RunService.Heartbeat:Connect(function()
        collectFromDrawers()
    end)
    
    print("üì¶ Auto Collect dari Laci: ENABLED")
end

local function disableAutoCollectDrawers()
    autoCollectEnabled = false
    
    if autoCollectConnection then 
        autoCollectConnection:Disconnect()
        autoCollectConnection = nil
    end
    
    print("üì¶ Auto Collect dari Laci: DISABLED")
end

-- ============================================================================
-- AUTO UNLOCK DOORS
-- ============================================================================

local function enableAutoUnlock()
    autoUnlockEnabled = true
    
    if autoUnlockConnection then autoUnlockConnection:Disconnect() end
    
    local function autoUnlockDoors()
        if not autoUnlockEnabled or not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end
        
        local currentRooms = workspace:FindFirstChild("CurrentRooms")
        if not currentRooms then return end
        
        for _, room in pairs(currentRooms:GetChildren()) do
            if room:IsA("Model") and tonumber(room.Name) then
                local door = room:FindFirstChild("Door")
                if door then
                    local doorPart = door:FindFirstChildWhichIsA("BasePart")
                    if doorPart then
                        local distance = (player.Character.HumanoidRootPart.Position - doorPart.Position).Magnitude
                        if distance <= 15 then
                            local lockPart = door:FindFirstChild("Lock")
                            if lockPart then
                                local unlockPrompt = lockPart:FindFirstChildOfClass("ProximityPrompt")
                                if unlockPrompt and unlockPrompt.Enabled then
                                    pcall(function()
                                        fireproximityprompt(unlockPrompt)
                                    end)
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    
    autoUnlockConnection = RunService.Heartbeat:Connect(function()
        autoUnlockDoors()
    end)
    
    print("üîì Auto Unlock Doors: ENABLED")
end

local function disableAutoUnlock()
    autoUnlockEnabled = false
    
    if autoUnlockConnection then 
        autoUnlockConnection:Disconnect()
        autoUnlockConnection = nil
    end
    
    print("üîì Auto Unlock Doors: DISABLED")
end

-- ============================================================================
-- INFINITE VITAMINS
-- ============================================================================

local function enableInfVitamins()
    infVitaminsEnabled = true
    
    if infVitaminsConnection then infVitaminsConnection:Disconnect() end
    
    infVitaminsConnection = RunService.Heartbeat:Connect(function()
        if not infVitaminsEnabled then return end
        
        pcall(function()
            if player.Character and player.Character:FindFirstChild("Humanoid") then
                player.Character.Humanoid.Health = player.Character.Humanoid.MaxHealth
            end
        end)
    end)
    
    print("üíä Infinite Vitamins: ENABLED")
end

local function disableInfVitamins()
    infVitaminsEnabled = false
    
    if infVitaminsConnection then 
        infVitaminsConnection:Disconnect()
        infVitaminsConnection = nil
    end
    
    print("üíä Infinite Vitamins: DISABLED")
end

-- ============================================================================
-- NOCLIP SYSTEM
-- ============================================================================

local function enableNoclip()
    noclipEnabled = true
    
    if noclipConnection then noclipConnection:Disconnect() end
    
    noclipConnection = RunService.Stepped:Connect(function()
        if not noclipEnabled or not player.Character then return end
        
        for _, part in pairs(player.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end)
    
    print("üëª Noclip: ENABLED")
end

local function disableNoclip()
    noclipEnabled = false
    
    if noclipConnection then 
        noclipConnection:Disconnect()
        noclipConnection = nil
    end
    
    if player.Character then
        for _, part in pairs(player.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
    end
    
    print("üëª Noclip: DISABLED")
end

-- ============================================================================
-- GOD MODE
-- ============================================================================

local function enableGodMode()
    godModeEnabled = true
    
    -- Clear existing connections
    for _, conn in pairs(godModeConnections) do
        if conn then conn:Disconnect() end
    end
    godModeConnections = {}
    
    -- Method 1: Health regeneration
    table.insert(godModeConnections, RunService.Heartbeat:Connect(function()
        if not godModeEnabled then return end
        
        pcall(function()
            if player.Character and player.Character:FindFirstChild("Humanoid") then
                local humanoid = player.Character.Humanoid
                if humanoid.Health < humanoid.MaxHealth then
                    humanoid.Health = humanoid.MaxHealth
                end
            end
        end)
    end))
    
    -- Method 2: Damage prevention
    if player.Character and player.Character:FindFirstChild("Humanoid") then
        table.insert(godModeConnections, player.Character.Humanoid.HealthChanged:Connect(function(health)
            if godModeEnabled and health < player.Character.Humanoid.MaxHealth then
                player.Character.Humanoid.Health = player.Character.Humanoid.MaxHealth
            end
        end))
    end
    
    print("üõ°Ô∏è God Mode: ENABLED")
end

local function disableGodMode()
    godModeEnabled = false
    
    for _, conn in pairs(godModeConnections) do
        if conn then conn:Disconnect() end
    end
    godModeConnections = {}
    
    print("üõ°Ô∏è God Mode: DISABLED")
end

-- ============================================================================
-- ENTITY NOTIFICATIONS
-- ============================================================================

local function setupEntityNotifications()
    local entities = {
        {name = "RushMoving", display = "Rush", sound = true},
        {name = "AmbushMoving", display = "Ambush", sound = true},
        {name = "Eyes", display = "Eyes", sound = true},
        {name = "Screech", display = "Screech", sound = true},
        {name = "Halt", display = "Halt", sound = false},
        {name = "Seek", display = "Seek", sound = true},
        {name = "Figure", display = "Figure", sound = true},
        {name = "A60", display = "A-60", sound = true},
        {name = "A120", display = "A-120", sound = true}
    }
    
    for _, entity in pairs(entities) do
        table.insert(entityConnections, workspace.ChildAdded:Connect(function(child)
            if (rushNotifEnabled and entity.name == "RushMoving") or 
               (allEntityNotifications and entity.name ~= "RushMoving") then
                
                if child.Name == entity.name or child.Name:find(entity.name) then
                    createNotification(
                        "‚ö†Ô∏è ENTITY ALERT",
                        entity.display .. " has spawned! Hide immediately!",
                        Color3.fromRGB(255, 0, 0),
                        5
                    )
                    
                    if entity.sound then
                        local sound = Instance.new("Sound")
                        sound.SoundId = "rbxassetid://4590662766"
                        sound.Volume = 2
                        sound.Parent = game.SoundService
                        sound:Play()
                        game:GetService("Debris"):AddItem(sound, 3)
                    end
                end
            end
        end))
    end
end

setupEntityNotifications()

-- ============================================================================
-- ADVANCED NOTIFICATION SYSTEM
-- ============================================================================

local function createNotification(title, message, color, duration)
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "WenerNotification"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.Parent = game.CoreGui
    
    local NotificationFrame = Instance.new("Frame")
    NotificationFrame.Size = UDim2.new(0, 400, 0, 100)
    NotificationFrame.Position = UDim2.new(1, 20, 0, 100)
    NotificationFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
    NotificationFrame.BorderSizePixel = 0
    NotificationFrame.Parent = ScreenGui
    
    local Corner = Instance.new("UICorner")
    Corner.CornerRadius = UDim.new(0, 15)
    Corner.Parent = NotificationFrame
    
    local Stroke = Instance.new("UIStroke")
    Stroke.Color = color or Color3.fromRGB(139, 0, 255)
    Stroke.Thickness = 2
    Stroke.Parent = NotificationFrame
    
    local TitleLabel = Instance.new("TextLabel")
    TitleLabel.Size = UDim2.new(1, -20, 0, 30)
    TitleLabel.Position = UDim2.new(0, 10, 0, 5)
    TitleLabel.BackgroundTransparency = 1
    TitleLabel.Text = title
    TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    TitleLabel.Font = Enum.Font.GothamBold
    TitleLabel.TextSize = 16
    TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
    TitleLabel.Parent = NotificationFrame
    
    local MessageLabel = Instance.new("TextLabel")
    MessageLabel.Size = UDim2.new(1, -20, 0, 50)
    MessageLabel.Position = UDim2.new(0, 10, 0, 35)
    MessageLabel.BackgroundTransparency = 1
    MessageLabel.Text = message
    MessageLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    MessageLabel.Font = Enum.Font.Gotham
    MessageLabel.TextSize = 14
    MessageLabel.TextWrapped = true
    MessageLabel.TextXAlignment = Enum.TextXAlignment.Left
    MessageLabel.TextYAlignment = Enum.TextYAlignment.Top
    MessageLabel.Parent = NotificationFrame
    
    -- Key expiry countdown
    if title:find("Key") and not isOwner then
        task.spawn(function()
            local keyValid, timeLeft = checkKey()
            while timeLeft and timeLeft > 0 and MessageLabel.Parent do
                MessageLabel.Text = message .. "\n‚è∞ Expires in: " .. formatTime(timeLeft)
                wait(1)
                keyValid, timeLeft = checkKey()
            end
        end)
    end
    
    TweenService:Create(NotificationFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back), {
        Position = UDim2.new(1, -420, 0, 100)
    }):Play()
    
    task.spawn(function()
        task.wait(duration or 5)
        
        TweenService:Create(NotificationFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quad), {
            Position = UDim2.new(1, 20, 0, 100),
            BackgroundTransparency = 1
        }):Play()
        
        TweenService:Create(TitleLabel, TweenInfo.new(0.5), {TextTransparency = 1}):Play()
        TweenService:Create(MessageLabel, TweenInfo.new(0.5), {TextTransparency = 1}):Play()
        TweenService:Create(Stroke, TweenInfo.new(0.5), {Transparency = 1}):Play()
        
        task.wait(0.5)
        ScreenGui:Destroy()
    end)
end

-- ============================================================================
-- MAIN GUI CREATION WITH RAYFIELD
-- ============================================================================

task.spawn(function()
    wait(3)
    
    local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
    
    local Window = Rayfield:CreateWindow({
        Name = "Wener Hub v4.0 - Ultimate Complete Edition",
        LoadingTitle = "Wener Hub Ultimate",
        LoadingSubtitle = "Key: Wene-you | 24-Hour Premium Access",
        ConfigurationSaving = {
            Enabled = true,
            FolderName = "WenerHub",
            FileName = "WenerHub_Config"
        },
        Discord = {
            Enabled = false
        },
        KeySystem = false
    })
    
    -- ========================================================================
    -- KEY INFO TAB
    -- ========================================================================
    
    local KeyInfoTab = Window:CreateTab("üîë Key Info", 4483362458)
    
    KeyInfoTab:CreateParagraph({
        Title = "üîë Premium Key System", 
        Content = "‚Ä¢ Key: Wene-you (Super Premium)\n‚Ä¢ Validity: 24 Hours (86400 seconds)\n‚Ä¢ Auto-save configuration enabled\n‚Ä¢ Owner bypass: winnertupiq52\n‚Ä¢ All premium features unlocked"
    })
    
    if not isOwner then
        local keyValid, timeLeft = checkKey()
        if keyValid then
            KeyInfoTab:CreateLabel("‚úÖ Key Status: ACTIVE")
            KeyInfoTab:CreateLabel("‚è∞ Time Remaining: " .. formatTime(timeLeft))
            
            createNotification(
                "üîë Key Active", 
                "Premium access granted!\nExpires in: " .. formatTime(timeLeft),
                Color3.fromRGB(0, 255, 0),
                30
            )
        else
            KeyInfoTab:CreateLabel("‚ùå Key Status: EXPIRED")
        end
    else
        KeyInfoTab:CreateParagraph({
            Title = "üëë Owner Access", 
            Content = "Welcome, Owner!\nAll features unlocked permanently.\nNo key expiry for owner account."
        })
    end
    
    KeyInfoTab:CreateButton({
        Name = "üìã Copy Key to Clipboard",
        Callback = function()
            setclipboard("Wene-you")
            Rayfield:Notify({
                Title = "‚úÖ Copied!",
                Content = "Key 'Wene-you' copied to clipboard",
                Duration = 3,
                Image = 4483362458,
            })
        end
    })
    
    -- ========================================================================
    -- MAIN FEATURES TAB
    -- ========================================================================
    
    local MainTab = Window:CreateTab("‚öôÔ∏è Main Features", 4483362458)
    
    MainTab:CreateSlider({
        Name = "‚ö° Speed Multiplier",
        Range = {1, 6},
        Increment = 0.1,
        Suffix = "x",
        CurrentValue = 1,
        Flag = "SpeedSlider",
        Callback = function(v) 
            currentSpeed = 16 * v
            if player.Character and player.Character:FindFirstChild("Humanoid") then
                player.Character.Humanoid.WalkSpeed = currentSpeed
            end
        end
    })
    
    MainTab:CreateToggle({
        Name = "üõ°Ô∏è God Mode",
        CurrentValue = false,
        Flag = "GodMode",
        Callback = function(v)
            if v then
                enableGodMode()
            else
                disableGodMode()
            end
        end
    })
    
    MainTab:CreateToggle({
        Name = "üëª Noclip",
        CurrentValue = false,
        Flag = "Noclip",
        Callback = function(v)
            if v then
                enableNoclip()
            else
                disableNoclip()
            end
        end
    })
    
    MainTab:CreateToggle({
        Name = "üíä Infinite Vitamins",
        CurrentValue = false,
        Flag = "InfVitamins",
        Callback = function(v)
            if v then
                enableInfVitamins()
            else
                disableInfVitamins()
            end
        end
    })
    
    MainTab:CreateButton({
        Name = "üîÑ Reset Character",
        Callback = function()
            if player.Character and player.Character:FindFirstChild("Humanoid") then
                player.Character.Humanoid.Health = 0
            end
        end
    })
    
    -- ========================================================================
    -- MODERN ESP TAB
    -- ========================================================================
    
    local ESPTab = Window:CreateTab("üëÅÔ∏è Modern ESP", 4483362458)
    
    ESPTab:CreateLabel("‚ú® Modern ESP System (Premium Design)")
    ESPTab:CreateLabel("Not Old Printer Style - Smooth & Beautiful")
    
    ESPTab:CreateToggle({
        Name = "üö™ Door ESP",
        CurrentValue = false,
        Flag = "DoorESP",
        Callback = function(v)
            doorEspEnabled = v
            if v then
                updateDoorESP()
                task.spawn(function()
                    while doorEspEnabled do
                        updateDoorESP()
                        wait(2)
                    end
                end)
            else
                for _, esp in pairs(espObjects) do
                    if esp.highlight and esp.highlight.Name:find("door") then
                        esp.highlight:Destroy()
                    end
                    if esp.billboard and esp.billboard.Name:find("door") then
                        esp.billboard:Destroy()
                    end
                end
            end
        end
    })
    
    ESPTab:CreateToggle({
        Name = "üóùÔ∏è Modern Key ESP (FIXED)",
        CurrentValue = false,
        Flag = "KeyESP",
        Callback = function(v)
            keyEspEnabled = v
            if v then
                updateKeyESP()
                task.spawn(function()
                    while keyEspEnabled do
                        updateKeyESP()
                        wait(1)
                    end
                end)
            else
                for _, esp in pairs(espObjects) do
                    if esp.highlight and esp.highlight.Name:find("key") then
                        esp.highlight:Destroy()
                    end
                    if esp.billboard and esp.billboard.Name:find("key") then
                        esp.billboard:Destroy()
                    end
                end
            end
        end
    })
    
    ESPTab:CreateToggle({
        Name = "üì¶ Item ESP",
        CurrentValue = false,
        Flag = "ItemESP",
        Callback = function(v)
            itemEspEnabled = v
            if v then
                updateItemESP()
                task.spawn(function()
                    while itemEspEnabled do
                        updateItemESP()
                        wait(2)
                    end
                end)
            else
                for _, esp in pairs(espObjects) do
                    if esp.highlight and esp.highlight.Name:find("item") then
                        esp.highlight:Destroy()
                    end
                    if esp.billboard and esp.billboard.Name:find("item") then
                        esp.billboard:Destroy()
                    end
                end
            end
        end
    })
    
    ESPTab:CreateToggle({
        Name = "üìö Book ESP (Figure)",
        CurrentValue = false,
        Flag = "BookESP",
        Callback = function(v)
            bookEspEnabled = v
            if v then
                updateBookESP()
                task.spawn(function()
                    while bookEspEnabled do
                        updateBookESP()
                        wait(2)
                    end
                end)
            else
                for _, esp in pairs(espObjects) do
                    if esp.highlight and esp.highlight.Name:find("book") then
                        esp.highlight:Destroy()
                    end
                    if esp.billboard and esp.billboard.Name:find("book") then
                        esp.billboard:Destroy()
                    end
                end
            end
        end
    })
    
    ESPTab:CreateToggle({
        Name = "‚ö†Ô∏è Entity ESP",
        CurrentValue = false,
        Flag = "EntityESP",
        Callback = function(v)
            entityEspEnabled = v
            if v then
                updateEntityESP()
                task.spawn(function()
                    while entityEspEnabled do
                        updateEntityESP()
                        wait(1)
                    end
                end)
            else
                for _, esp in pairs(espObjects) do
                    if esp.highlight and esp.highlight.Name:find("entity") then
                        esp.highlight:Destroy()
                    end
                    if esp.billboard and esp.billboard.Name:find("entity") then
                        esp.billboard:Destroy()
                    end
                end
            end
        end
    })
    
    ESPTab:CreateToggle({
        Name = "üë§ Player ESP",
        CurrentValue = false,
        Flag = "PlayerESP",
        Callback = function(v)
            playerEspEnabled = v
            if v then
                updatePlayerESP()
                task.spawn(function()
                    while playerEspEnabled do
                        updatePlayerESP()
                        wait(2)
                    end
                end)
            else
                for _, esp in pairs(espObjects) do
                    if esp.highlight and esp.highlight.Name:find("player") then
                        esp.highlight:Destroy()
                    end
                    if esp.billboard and esp.billboard.Name:find("player") then
                        esp.billboard:Destroy()
                    end
                end
            end
        end
    })
    
    ESPTab:CreateButton({
        Name = "üóëÔ∏è Clear All ESP",
        Callback = function()
            for _, esp in pairs(espObjects) do
                if esp.highlight then esp.highlight:Destroy() end
                if esp.billboard then esp.billboard:Destroy() end
            end
            espObjects = {}
            
            Rayfield:Notify({
                Title = "‚úÖ ESP Cleared",
                Content = "All ESP objects removed",
                Duration = 3,
                Image = 4483362458,
            })
        end
    })
    
    -- ========================================================================
    -- AUTO FEATURES TAB
    -- ========================================================================
    
    local AutoTab = Window:CreateTab("ü§ñ Auto Features", 4483362458)
    
    AutoTab:CreateLabel("üéØ Premium Auto Features")
    
    AutoTab:CreateToggle({
        Name = "ü§ñ Auto ProximityPrompt R",
        CurrentValue = false,
        Flag = "AutoProximityPrompt",
        Callback = function(v)
            if v then
                enableAutoProximityPrompt()
            else
                disableAutoProximityPrompt()
            end
        end
    })
    
    AutoTab:CreateToggle({
        Name = "üì¶ Auto Collect from Drawers",
        CurrentValue = false,
        Flag = "AutoCollectDrawers",
        Callback = function(v)
            if v then
                enableAutoCollectDrawers()
            else
                disableAutoCollectDrawers()
            end
        end
    })
    
    AutoTab:CreateToggle({
        Name = "üîì Auto Unlock Doors",
        CurrentValue = false,
        Flag = "AutoUnlock",
        Callback = function(v)
            if v then
                enableAutoUnlock()
            else
                disableAutoUnlock()
            end
        end
    })
    
    AutoTab:CreateParagraph({
        Title = "üéØ Auto Features Info", 
        Content = "‚Ä¢ Auto ProximityPrompt R: Automatically press R on all prompts\n‚Ä¢ Auto Collect: Automatically open drawers and collect items\n‚Ä¢ Auto Unlock: Automatically unlock doors with keys\n‚Ä¢ Smart detection with optimal radius\n‚Ä¢ Performance optimized for smooth gameplay"
    })
    
    -- ========================================================================
    -- NOTIFICATIONS TAB
    -- ========================================================================
    
    local NotifTab = Window:CreateTab("üîî Notifications", 4483362458)
    
    NotifTab:CreateToggle({
        Name = "‚ö° Rush Notifications",
        CurrentValue = false,
        Flag = "RushNotif",
        Callback = function(v)
            rushNotifEnabled = v
            if v then
                createNotification(
                    "üîî Rush Notifications",
                    "Rush notifications are now enabled!",
                    Color3.fromRGB(255, 100, 0),
                    3
                )
            end
        end
    })
    
    NotifTab:CreateToggle({
        Name = "‚ö†Ô∏è All Entity Notifications",
        CurrentValue = false,
        Flag = "AllEntityNotif",
        Callback = function(v)
            allEntityNotifications = v
            if v then
                createNotification(
                    "üîî Entity Notifications",
                    "All entity notifications are now enabled!",
                    Color3.fromRGB(255, 0, 0),
                    3
                )
            end
        end
    })
    
    NotifTab:CreateButton({
        Name = "üîî Test Notification",
        Callback = function()
            createNotification(
                "‚ú® Test Notification",
                "This is a test notification from Wener Hub!",
                Color3.fromRGB(139, 0, 255),
                5
            )
        end
    })
    
    -- ========================================================================
    -- TELEPORT TAB
    -- ========================================================================
    
    local TeleportTab = Window:CreateTab("üåê Teleport", 4483362458)
    
    local roomInput
    roomInput = TeleportTab:CreateInput({
        Name = "üö™ Room Number",
        PlaceholderText = "Enter room number (1-100)",
        RemoveTextAfterFocusLost = false,
        Callback = function(text)
            -- Input validation handled in teleport button
        end
    })
    
    TeleportTab:CreateButton({
        Name = "üöÄ Teleport to Room",
        Callback = function()
            local roomNum = tonumber(roomInput.Text)
            if roomNum and roomNum >= 1 and roomNum <= 100 then
                local currentRooms = workspace:FindFirstChild("CurrentRooms")
                if currentRooms then
                    local targetRoom = currentRooms:FindFirstChild(tostring(roomNum))
                    if targetRoom and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                        local roomPart = targetRoom:FindFirstChildWhichIsA("BasePart")
                        if roomPart then
                            player.Character.HumanoidRootPart.CFrame = roomPart.CFrame + Vector3.new(0, 5, 0)
                            
                            Rayfield:Notify({
                                Title = "üöÄ Teleported!",
                                Content = "Successfully teleported to room " .. roomNum,
                                Duration = 3,
                                Image = 4483362458,
                            })
                        else
                            Rayfield:Notify({
                                Title = "‚ùå Error",
                                Content = "Room " .. roomNum .. " not found or not loaded",
                                Duration = 3,
                                Image = 4483362458,
                            })
                        end
                    else
                        Rayfield:Notify({
                            Title = "‚ùå Error",
                            Content = "Room " .. roomNum .. " not available",
                            Duration = 3,
                            Image = 4483362458,
                        })
                    end
                else
                    Rayfield:Notify({
                        Title = "‚ùå Error",
                        Content = "CurrentRooms not found",
                        Duration = 3,
                        Image = 4483362458,
                    })
                end
            else
                Rayfield:Notify({
                    Title = "‚ùå Invalid Input",
                    Content = "Please enter a valid room number (1-100)",
                    Duration = 3,
                    Image = 4483362458,
                })
            end
        end
    })
    
    TeleportTab:CreateButton({
        Name = "üè† Teleport to Latest Room",
        Callback = function()
            local currentRooms = workspace:FindFirstChild("CurrentRooms")
            if currentRooms and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local latestRoom = nil
                local latestNumber = 0
                
                for _, room in pairs(currentRooms:GetChildren()) do
                    if room:IsA("Model") then
                        local roomNum = tonumber(room.Name)
                        if roomNum and roomNum > latestNumber then
                            latestNumber = roomNum
                            latestRoom = room
                        end
                    end
                end
                
                if latestRoom then
                    local roomPart = latestRoom:FindFirstChildWhichIsA("BasePart")
                    if roomPart then
                        player.Character.HumanoidRootPart.CFrame = roomPart.CFrame + Vector3.new(0, 5, 0)
                        
                        Rayfield:Notify({
                            Title = "üöÄ Teleported!",
                            Content = "Teleported to latest room: " .. latestNumber,
                            Duration = 3,
                            Image = 4483362458,
                        })
                    end
                end
            end
        end
    })
    
    -- Quick teleport buttons
    TeleportTab:CreateLabel("üéØ Quick Teleports")
    
    local quickRooms = {1, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100}
    
    for i = 1, #quickRooms, 3 do
        local buttonsText = ""
        for j = i, math.min(i + 2, #quickRooms) do
            if j > i then buttonsText = buttonsText .. " | " end
            buttonsText = buttonsText .. "Room " .. quickRooms[j]
        end
        
        TeleportTab:CreateButton({
            Name = buttonsText,
            Callback = function()
                -- This would need individual buttons, simplified for space
                Rayfield:Notify({
                    Title = "üí° Tip",
                    Content = "Use the room input above for precise teleportation",
                    Duration = 3,
                    Image = 4483362458,
                })
            end
        })
    end
    
    -- ========================================================================
    -- MISC TAB
    -- ========================================================================
    
    local MiscTab = Window:CreateTab("üîß Misc", 4483362458)
    
    MiscTab:CreateButton({
        Name = "üí° Fullbright",
        Callback = function()
            local Lighting = game:GetService("Lighting")
            Lighting.Brightness = 2
            Lighting.ClockTime = 14
            Lighting.FogEnd = 100000
            Lighting.GlobalShadows = false
            Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
            
            Rayfield:Notify({
                Title = "üí° Fullbright Enabled",
                Content = "Lighting has been optimized for visibility",
                Duration = 3,
                Image = 4483362458,
            })
        end
    })
    
    MiscTab:CreateButton({
        Name = "üåô Reset Lighting",
        Callback = function()
            local Lighting = game:GetService("Lighting")
            Lighting.Brightness = 1
            Lighting.ClockTime = 0
            Lighting.FogEnd = 100
            Lighting.GlobalShadows = true
            Lighting.OutdoorAmbient = Color3.fromRGB(70, 70, 70)
            
            Rayfield:Notify({
                Title = "üåô Lighting Reset",
                Content = "Lighting restored to default",
                Duration = 3,
                Image = 4483362458,
            })
        end
    })
    
    MiscTab:CreateButton({
        Name = "üéµ Remove Seek Chase Music",
        Callback = function()
            local function removeSeekMusic()
                for _, sound in pairs(workspace:GetDescendants()) do
                    if sound:IsA("Sound") and (sound.Name:find("Seek") or sound.SoundId:find("8258706833")) then
                        sound.Volume = 0
                        sound:Stop()
                    end
                end
            end
            
            removeSeekMusic()
            
            -- Continue removing music
            task.spawn(function()
                while true do
                    removeSeekMusic()
                    wait(1)
                end
            end)
            
            Rayfield:Notify({
                Title = "üéµ Music Removed",
                Content = "Seek chase music has been removed",
                Duration = 3,
                Image = 4483362458,
            })
        end
    })
    
    MiscTab:CreateButton({
        Name = "üîä Remove All Sounds",
        Callback = function()
            for _, sound in pairs(workspace:GetDescendants()) do
                if sound:IsA("Sound") then
                    sound.Volume = 0
                    sound:Stop()
                end
            end
            
            Rayfield:Notify({
                Title = "üîä Sounds Removed",
                Content = "All sounds have been muted",
                Duration = 3,
                Image = 4483362458,
            })
        end
    })
    
    MiscTab:CreateButton({
        Name = "üìã Copy Discord Link",
        Callback = function()
            setclipboard("https://discord.gg/wenerhub")
            
            Rayfield:Notify({
                Title = "üìã Copied!",
                Content = "Discord link copied to clipboard",
                Duration = 3,
                Image = 4483362458,
            })
        end
    })
    
    -- ========================================================================
    -- ABOUT TAB
    -- ========================================================================
    
    local AboutTab = Window:CreateTab("‚ÑπÔ∏è About", 4483362458)
    
    AboutTab:CreateParagraph({
        Title = "üöÄ Wener Hub v4.0 Ultimate Complete", 
        Content = "The most advanced Doors script with premium features.\n\n‚ú® Features:\n‚Ä¢ Modern ESP System (Not Old Printer Style)\n‚Ä¢ Auto ProximityPrompt R\n‚Ä¢ Auto Collect from Drawers\n‚Ä¢ 24-Hour Key System: Wene-you\n‚Ä¢ Complete Entity Detection\n‚Ä¢ Premium Notifications\n‚Ä¢ Advanced Teleportation\n‚Ä¢ All Quality of Life Features"
    })
    
    AboutTab:CreateParagraph({
        Title = "üë®‚Äçüíª Developer Info", 
        Content = "‚Ä¢ Script Creator: Wener Team\n‚Ä¢ Owner: winnertupiq52\n‚Ä¢ Version: v4.0 Ultimate Complete\n‚Ä¢ Key: Wene-you (24-Hour Premium)\n‚Ä¢ Last Updated: 2024"
    })
    
    AboutTab:CreateParagraph({
        Title = "üîë Key System", 
        Content = "‚Ä¢ Premium Key: Wene-you\n‚Ä¢ Expiry Time: 24 Hours (86400 seconds)\n‚Ä¢ Auto-save configuration\n‚Ä¢ Owner bypass available\n‚Ä¢ All premium features included"
    })
    
    AboutTab:CreateLabel("üåü Thank you for using Wener Hub!")
    
    -- Show welcome notification
    if not isOwner then
        local keyValid, timeLeft = checkKey()
        if keyValid then
            createNotification(
                "üéâ Welcome to Wener Hub!",
                "All premium features loaded!\nKey expires in: " .. formatTime(timeLeft),
                Color3.fromRGB(139, 0, 255),
                8
            )
        end
    else
        createNotification(
            "üëë Owner Welcome!",
            "Welcome back, Owner!\nAll features permanently unlocked.",
            Color3.fromRGB(255, 215, 0),
            5
        )
    end
    
    -- Final success notification
    Rayfield:Notify({
        Title = "üöÄ WENER HUB LOADED!",
        Content = "v4.0 Ultimate Complete Edition Ready!\nKey: Wene-you | Modern ESP & Auto Features Active",
        Duration = 6,
        Image = 4483362458,
    })
    
    print("‚úÖ WENER HUB v4.0 ULTIMATE COMPLETE LOADED!")
    print("üîë Key System: Wene-you - 24-Hour Expiry Active")
    print("ü§ñ Auto Features: ProximityPrompt R & Auto Collect Ready")
    print("üëÅÔ∏è Modern ESP: Premium Design (Not Old Printer Style)")
    print("üéØ All Systems: FULLY OPERATIONAL")
end)

-- ============================================================================
-- CHARACTER RESPAWN HANDLER
-- ============================================================================

player.CharacterAdded:Connect(function(character)
    repeat wait() until character:FindFirstChild("HumanoidRootPart")
    
    -- Restore speed if modified
    if currentSpeed ~= 16 then
        character:WaitForChild("Humanoid").WalkSpeed = currentSpeed
    end
    
    -- Re-enable god mode if active
    if godModeEnabled then
        task.wait(1)
        enableGodMode()
    end
    
    -- Re-enable noclip if active
    if noclipEnabled then
        task.wait(0.5)
        enableNoclip()
    end
end)

-- ============================================================================
-- AUTO KEY EXPIRY MONITORING
-- ============================================================================

task.spawn(function()
    while true do
        wait(60) -- Check every minute
        
        if not isOwner then
            local keyValid, timeLeft = checkKey()
            
            if not keyValid then
                createNotification(
                    "üîë Key Expired!",
                    "Your premium access has expired.\nPlease enter key: Wene-you",
                    Color3.fromRGB(255, 0, 0),
                    10
                )
                
                wait(5)
                player:Kick("üîë Premium key expired! Get new 24-hour key: Wene-you")
            elseif timeLeft and timeLeft < 3600 then -- Warning when less than 1 hour
                createNotification(
                    "‚ö†Ô∏è Key Expiring Soon!",
                    "Your premium access expires in: " .. formatTime(timeLeft) .. "\nKey: Wene-you",
                    Color3.fromRGB(255, 165, 0),
                    8
                )
            elseif timeLeft and timeLeft < 1800 then -- Final warning at 30 minutes
                createNotification(
                    "üö® FINAL WARNING!",
                    "Key expires in: " .. formatTime(timeLeft) .. "\nRenew with: Wene-you",
                    Color3.fromRGB(255, 0, 0),
                    10
                )
            end
        end
    end
end)

-- ============================================================================
-- ESP AUTO-UPDATE SYSTEM
-- ============================================================================

task.spawn(function()
    while true do
        wait(3)
        
        if doorEspEnabled then updateDoorESP() end
        if keyEspEnabled then updateKeyESP() end
        if itemEspEnabled then updateItemESP() end
        if bookEspEnabled then updateBookESP() end
        if entityEspEnabled then updateEntityESP() end
        if playerEspEnabled then updatePlayerESP() end
    end
end)

-- ============================================================================
-- PERFORMANCE OPTIMIZER
-- ============================================================================

task.spawn(function()
    while true do
        wait(10)
        
        -- Clean up destroyed ESP objects
        for i = #espObjects, 1, -1 do
            local esp = espObjects[i]
            if not esp.highlight or not esp.highlight.Parent or not esp.billboard or not esp.billboard.Parent then
                table.remove(espObjects, i)
            end
        end
        
        -- Memory cleanup
        if #espObjects > 200 then
            for i = 1, 50 do
                local esp = espObjects[i]
                if esp.highlight then esp.highlight:Destroy() end
                if esp.billboard then esp.billboard:Destroy() end
                table.remove(espObjects, i)
            end
        end
    end
end)

-- ============================================================================
-- FINAL INITIALIZATION MESSAGES
-- ============================================================================

wait(2)

print("=" .. string.rep("=", 60) .. "=")
print("üöÄ WENER HUB v4.0 ULTIMATE COMPLETE EDITION")
print("=" .. string.rep("=", 60) .. "=")
print("‚úÖ Status: FULLY LOADED & OPERATIONAL")
print("üîë Key System: Wene-you (24-Hour Premium)")
print("üëÅÔ∏è Modern ESP: Premium Design (Not Old Printer)")
print("ü§ñ Auto Features: ProximityPrompt R & Auto Collect")
print("üéØ Target Game: Doors")
print("üë§ User: " .. player.DisplayName)
if isOwner then
    print("üëë Access Level: OWNER (Permanent)")
else
    local keyValid, timeLeft = checkKey()
    if keyValid then
        print("üíé Access Level: PREMIUM (" .. formatTime(timeLeft) .. " remaining)")
    else
        print("‚ùå Access Level: EXPIRED")
    end
end
print("üåê Auto Execute: CONFIGURED")
print("üîÑ Auto Reconnect: ACTIVE")
print("=" .. string.rep("=", 60) .. "=")
print("üéâ Thank you for using Wener Hub!")
print("üí¨ Join our Discord: https://discord.gg/wenerhub")
print("=" .. string.rep("=", 60) .. "=")

-- Final success notification
createNotification(
    "üéâ Wener Hub Fully Loaded!",
    "v4.0 Ultimate Complete Edition\nAll premium features are now active!\nKey: Wene-you | 24-Hour Access",
    Color3.fromRGB(0, 255, 0),
    10
)
